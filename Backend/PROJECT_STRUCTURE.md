# Project Structure - DevMindAPI

```
DevMindAPI/
│
├── main.py                          # FastAPI application (main entry point)
├── requirements.txt                 # Python dependencies
├── README.md                        # Project overview and documentation
├── QUICKSTART.md                    # Quick start guide
├── ARCHITECTURE.md                  # Detailed architecture documentation
├── setup.ps1                        # Automated setup script
├── start_api.bat                    # Windows batch file to start API
├── test_api.py                      # Python test script
├── test_api.ps1                     # PowerShell test script
├── example_usage.py                 # Example code showing API usage
├── .gitignore                       # Git ignore file
│
└── vscode-copilot-bridge/           # VS Code Extension
    ├── package.json                 # Extension manifest
    ├── tsconfig.json                # TypeScript configuration
    ├── README.md                    # Extension documentation
    ├── .gitignore                   # Extension git ignore
    ├── .vscodeignore                # Files to ignore when packaging
    │
    ├── src/
    │   └── extension.ts             # Extension main code
    │
    ├── out/                         # Compiled JavaScript (generated)
    │   └── extension.js
    │
    ├── node_modules/                # Node.js dependencies (generated)
    │
    └── .vscode/                     # VS Code configuration
        ├── launch.json              # Debug configuration
        └── tasks.json               # Build tasks
```

## File Descriptions

### Root Directory

**main.py**
- FastAPI application with REST endpoints
- WebSocket client to communicate with VS Code extension
- Request validation and error handling
- Health check and status endpoints

**requirements.txt**
- Python package dependencies
- FastAPI, Uvicorn, WebSockets, Pydantic

**README.md**
- Project overview
- Installation instructions
- Usage examples
- API documentation

**QUICKSTART.md**
- Step-by-step setup guide
- Quick start instructions
- Troubleshooting tips
- Testing examples

**ARCHITECTURE.md**
- System architecture
- Component descriptions
- Data flow diagrams
- Security considerations
- Scaling options

**setup.ps1**
- Automated PowerShell setup script
- Installs all dependencies
- Compiles extension
- Verifies installation

**start_api.bat**
- Windows batch file
- Creates virtual environment
- Installs dependencies
- Starts FastAPI server

**test_api.py**
- Python test suite
- Tests all API endpoints
- Validation tests
- Error handling tests

**test_api.ps1**
- PowerShell test script
- Quick API testing
- Health checks
- Example requests

**example_usage.py**
- Comprehensive usage examples
- Python client class
- Real-world scenarios
- Best practices

### VS Code Extension Directory

**package.json**
- Extension manifest
- Metadata (name, version, publisher)
- Dependencies
- Commands and configuration
- Activation events

**tsconfig.json**
- TypeScript compiler configuration
- Target ES2020
- Output directory
- Source maps enabled

**src/extension.ts**
- Main extension code
- WebSocket server implementation
- VS Code Language Model API integration
- Command handlers
- Logging and error handling

**out/extension.js**
- Compiled JavaScript (generated by TypeScript)
- Production code executed by VS Code

**.vscode/launch.json**
- Debug configuration
- Extension Development Host settings
- Pre-launch tasks

**.vscode/tasks.json**
- Build tasks
- TypeScript watch mode
- Problem matchers

## Component Responsibilities

### FastAPI Service (main.py)
```
┌─────────────────────────────────┐
│       FastAPI Service           │
├─────────────────────────────────┤
│ • REST API endpoints            │
│ • Request validation            │
│ • WebSocket client              │
│ • Error handling                │
│ • Response formatting           │
│ • Health monitoring             │
└─────────────────────────────────┘
```

### VS Code Extension (extension.ts)
```
┌─────────────────────────────────┐
│    VS Code Extension Bridge     │
├─────────────────────────────────┤
│ • WebSocket server              │
│ • Language Model API integration│
│ • Copilot Chat interaction      │
│ • Command registration          │
│ • Configuration management      │
│ • Logging and diagnostics       │
└─────────────────────────────────┘
```

## Data Models

### Request Model (Pydantic)
```python
class PromptRequest:
    prompt: str          # Required, min length 1
    timeout: int = 60    # Optional, default 60 seconds
```

### Response Model (Pydantic)
```python
class CopilotResponse:
    success: bool        # Request success status
    response: str        # Copilot's answer
    prompt: str          # Original prompt
    timestamp: str       # ISO format timestamp
    error: str | None    # Error message if failed
```

### WebSocket Messages

**Request Message**
```json
{
  "type": "copilot_request",
  "requestId": "unique-id",
  "prompt": "user prompt",
  "timestamp": "ISO-8601"
}
```

**Response Message**
```json
{
  "type": "copilot_response",
  "requestId": "unique-id",
  "response": "copilot answer",
  "timestamp": "ISO-8601"
}
```

**Error Message**
```json
{
  "type": "error",
  "error": "error description",
  "timestamp": "ISO-8601"
}
```

## Configuration Files

### Python (requirements.txt)
```
fastapi==0.104.1       # Web framework
uvicorn==0.24.0        # ASGI server
pydantic==2.5.0        # Data validation
websockets==12.0       # WebSocket client
```

### Node.js (package.json dependencies)
```json
{
  "ws": "^8.16.0",                          // WebSocket server
  "@types/vscode": "^1.85.0",               // VS Code API types
  "@types/node": "^20.x",                   // Node.js types
  "typescript": "^5.3.2"                    // TypeScript compiler
}
```

## Build Artifacts

### Generated Files
```
out/                    # Compiled TypeScript
node_modules/           # Node.js dependencies
venv/                   # Python virtual environment
__pycache__/            # Python bytecode cache
*.pyc                   # Compiled Python files
```

### Distribution Files
```
*.vsix                  # Packaged VS Code extension
dist/                   # Python distribution packages
build/                  # Build artifacts
```

## Development Workflow

1. **Edit TypeScript** → `src/extension.ts`
2. **Compile** → `npm run compile` → `out/extension.js`
3. **Test** → Press F5 in VS Code
4. **Edit Python** → `main.py`
5. **Run** → `python main.py` (auto-reload enabled)
6. **Test API** → `.\test_api.ps1`

## Deployment Files

### For FastAPI
- `main.py` - Application code
- `requirements.txt` - Dependencies
- Configuration files (environment specific)

### For Extension
- `out/` directory - Compiled code
- `package.json` - Manifest
- `node_modules/` - Dependencies
- Or package as `.vsix` for distribution

## Important Ports

- **8000**: FastAPI HTTP server
- **8765**: WebSocket bridge (configurable)

## Log Locations

- **FastAPI**: Console/Terminal output
- **Extension**: VS Code Output panel → "Copilot Bridge"
- **VS Code**: Help → Toggle Developer Tools → Console
